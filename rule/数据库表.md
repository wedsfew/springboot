# 数据库表
## mysql 数据库demo 的表结构
### user表
 
```sql
CREATE TABLE `user` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `role` varchar(20) NOT NULL DEFAULT 'USER',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
```
#### 测试数据
- email: allnotice@qq.com
- password: 12345678
### admin表

```sql
CREATE TABLE `admin` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `password` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `role` varchar(20) NOT NULL DEFAULT 'ADMIN',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
```
#### 测试数据
- username: admin
- password: admin

### domain表

```sql
CREATE TABLE `domain` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `domain_id` bigint NOT NULL COMMENT 'DNSPod域名ID',
  `name` varchar(255) NOT NULL COMMENT '域名名称',
  `punycode` varchar(255) NOT NULL COMMENT '域名Punycode编码',
  `grade` varchar(50) NOT NULL COMMENT '域名套餐等级',
  `grade_level` int NOT NULL DEFAULT '0' COMMENT '套餐等级数值',
  `grade_title` varchar(100) NOT NULL COMMENT '套餐等级标题',
  `is_vip` varchar(10) NOT NULL DEFAULT 'NO' COMMENT '是否为VIP域名',
  `owner` varchar(255) NOT NULL COMMENT '域名所有者',
  `status` varchar(20) NOT NULL DEFAULT 'ENABLE' COMMENT '域名状态',
  `group_id` int NOT NULL DEFAULT '1' COMMENT '分组ID',
  `search_engine_push` varchar(10) NOT NULL DEFAULT 'NO' COMMENT '搜索引擎推送状态',
  `record_count` int NOT NULL DEFAULT '0' COMMENT '解析记录数量',
  `ttl` int NOT NULL DEFAULT '600' COMMENT '默认TTL值',
  `cname_speedup` varchar(20) NOT NULL DEFAULT 'DISABLE' COMMENT 'CNAME加速状态',
  `dns_status` varchar(50) DEFAULT '' COMMENT 'DNS状态',
  `remark` text COMMENT '域名备注',
  `vip_start_at` datetime DEFAULT NULL COMMENT 'VIP开始时间',
  `vip_end_at` datetime DEFAULT NULL COMMENT 'VIP结束时间',
  `vip_auto_renew` varchar(10) NOT NULL DEFAULT 'NO' COMMENT 'VIP自动续费状态',
  `created_on` datetime NOT NULL COMMENT 'DNSPod创建时间',
  `updated_on` datetime NOT NULL COMMENT 'DNSPod更新时间',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '本地创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '本地更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `domain_id` (`domain_id`),
  UNIQUE KEY `name` (`name`),
  KEY `idx_status` (`status`),
  KEY `idx_group_id` (`group_id`),
  KEY `idx_owner` (`owner`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='域名信息表';
```
### 用户三级域名表
```sql
CREATE TABLE `user_subdomain` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `user_id` bigint NOT NULL COMMENT '用户ID',
  `subdomain` varchar(100) NOT NULL COMMENT '子域名前缀',
  `domain` varchar(100) NOT NULL COMMENT '主域名',
  `record_id` bigint NOT NULL COMMENT 'DNSPod记录ID',
  `ip_address` varchar(100) NOT NULL COMMENT 'IP地址',
  `ttl` int NOT NULL DEFAULT '600' COMMENT 'TTL值',
  `status` varchar(20) NOT NULL DEFAULT 'ACTIVE' COMMENT '状态：ACTIVE-活跃，INACTIVE-不活跃，DELETED-已删除',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_user_subdomain` (`user_id`, `subdomain`, `domain`),
  UNIQUE KEY `uk_subdomain_domain` (`subdomain`, `domain`),
  KEY `idx_user_id` (`user_id`),
  KEY `idx_status` (`status`),
  KEY `idx_create_time` (`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='用户三级域名表';
```
#### 功能说明
- 用于保存从DNSPod获取的域名列表信息
- 支持域名信息的本地缓存和管理
- 提供域名状态、分组、所有者等多维度查询
- 自动同步DNSPod域名列表到本地数据库
