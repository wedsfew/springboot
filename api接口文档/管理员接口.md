# 管理员API接口文档

## 1. 管理员注册

### 基本信息

- **接口标识**：`ADMIN_REGISTER`
- **请求路径**：`POST /api/admin/register`
- **接口描述**：创建新的管理员账户
- **认证要求**：无需认证（公开接口）

### 请求参数

```json
{
  "username": "admin123",
  "password": "Admin@123",
  "email": "admin@example.com",
  "role": "ADMIN"  // 可选，默认为"ADMIN"
}
```

### 参数验证规则

| 参数名     | 必填 | 类型   | 规则                                       | 说明                           |
| ---------- | ---- | ------ | ------------------------------------------ | ------------------------------ |
| username   | 是   | string | 3-20字符，仅含字母、数字、下划线           | 管理员用户名，必须唯一         |
| password   | 是   | string | 8-32字符，必须包含大小写字母和数字         | 管理员密码                     |
| email      | 是   | string | 有效的邮箱地址格式                         | 管理员邮箱，必须唯一           |
| role       | 否   | string | 枚举值：ADMIN, SUPER_ADMIN                 | 管理员角色，默认为ADMIN        |

### 响应示例

#### 成功响应（状态码 200）

```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "id": 1,
    "username": "admin123",
    "email": "admin@example.com",
    "role": "ADMIN",
    "createTime": "2025-08-11T10:30:00",
    "updateTime": "2025-08-11T10:30:00"
  },
  "timestamp": "2025-08-11T10:30:00"
}
```

#### 失败响应

- **用户名已存在（409）**

```json
{
  "code": 409,
  "message": "用户名已存在",
  "data": null,
  "timestamp": "2025-08-11T10:30:00"
}
```

- **参数验证失败（400）**

```json
{
  "code": 400,
  "message": "用户名不能为空",
  "data": null,
  "timestamp": "2025-08-11T10:30:00"
}
```

## 2. 管理员登录

### 基本信息

- **接口标识**：`ADMIN_LOGIN`
- **请求路径**：`POST /api/admin/login`
- **接口描述**：管理员账户登录，获取JWT令牌
- **认证要求**：无需认证（公开接口）

### 请求参数

```json
{
  "username": "admin123",
  "password": "Admin@123"
}
```

### 参数验证规则

| 参数名   | 必填 | 类型   | 规则                               | 说明       |
| -------- | ---- | ------ | ---------------------------------- | ---------- |
| username | 是   | string | 3-20字符，仅含字母、数字、下划线   | 管理员用户名 |
| password | 是   | string | 8-32字符，必须包含大小写字母和数字 | 管理员密码   |

### 响应示例

#### 成功响应（状态码 200）

```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "admin": {
      "id": 1,
      "username": "admin123",
      "email": "admin@example.com",
      "role": "ADMIN",
      "createTime": "2025-08-11T10:30:00",
      "updateTime": "2025-08-11T10:30:00"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "timestamp": "2025-08-11T10:30:00"
}
```

#### 失败响应

- **用户名或密码错误（401）**

```json
{
  "code": 401,
  "message": "用户名或密码错误",
  "data": null,
  "timestamp": "2025-08-11T10:30:00"
}
```

- **参数验证失败（400）**

```json
{
  "code": 400,
  "message": "用户名不能为空",
  "data": null,
  "timestamp": "2025-08-11T10:30:00"
}
```

## 3. 获取管理员信息

### 基本信息

- **接口标识**：`GET_ADMIN_BY_ID`
- **请求路径**：`GET /api/admin/{id}`
- **接口描述**：根据ID获取管理员信息
- **认证要求**：需要认证，需要管理员权限

### 路径参数

| 参数名 | 必填 | 类型 | 规则       | 说明      |
| ------ | ---- | ---- | ---------- | --------- |
| id     | 是   | long | 大于0的整数 | 管理员ID |

### 响应示例

#### 成功响应（状态码 200）

```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "id": 1,
    "username": "admin123",
    "email": "admin@example.com",
    "role": "ADMIN",
    "createTime": "2025-08-11T10:30:00",
    "updateTime": "2025-08-11T10:30:00"
  },
  "timestamp": "2025-08-11T10:30:00"
}
```

#### 失败响应

- **管理员不存在（404）**

```json
{
  "code": 404,
  "message": "管理员不存在",
  "data": null,
  "timestamp": "2025-08-11T10:30:00"
}
```

- **未授权（401）**

```json
{
  "code": 401,
  "message": "未授权",
  "data": null,
  "timestamp": "2025-08-11T10:30:00"
}
```

## 4. 更新管理员信息

### 基本信息

- **接口标识**：`UPDATE_ADMIN`
- **请求路径**：`PUT /api/admin/{id}`
- **接口描述**：更新管理员信息
- **认证要求**：需要认证，需要管理员权限

### 路径参数

| 参数名 | 必填 | 类型 | 规则       | 说明      |
| ------ | ---- | ---- | ---------- | --------- |
| id     | 是   | long | 大于0的整数 | 管理员ID |

### 请求参数

```json
{
  "username": "admin_updated",
  "password": "NewPassword@123",  // 可选，如果不提供则不更新密码
  "email": "admin_new@example.com",
  "role": "SUPER_ADMIN"  // 可选，如果不提供则不更新角色
}
```

### 参数验证规则

| 参数名   | 必填 | 类型   | 规则                               | 说明                   |
| -------- | ---- | ------ | ---------------------------------- | ---------------------- |
| username | 是   | string | 3-20字符，仅含字母、数字、下划线   | 管理员用户名，必须唯一 |
| password | 否   | string | 8-32字符，必须包含大小写字母和数字 | 管理员密码             |
| email    | 是   | string | 有效的邮箱地址格式                 | 管理员邮箱，必须唯一   |
| role     | 否   | string | 枚举值：ADMIN, SUPER_ADMIN         | 管理员角色             |

### 响应示例

#### 成功响应（状态码 200）

```json
{
  "code": 200,
  "message": "更新成功",
  "data": {
    "id": 1,
    "username": "admin_updated",
    "email": "admin_new@example.com",
    "role": "SUPER_ADMIN",
    "createTime": "2025-08-11T10:30:00",
    "updateTime": "2025-08-11T11:30:00"
  },
  "timestamp": "2025-08-11T11:30:00"
}
```

#### 失败响应

- **管理员不存在（404）**

```json
{
  "code": 404,
  "message": "管理员不存在",
  "data": null,
  "timestamp": "2025-08-11T11:30:00"
}
```

- **用户名已存在（409）**

```json
{
  "code": 409,
  "message": "用户名已存在",
  "data": null,
  "timestamp": "2025-08-11T11:30:00"
}
```

- **未授权（401）**

```json
{
  "code": 401,
  "message": "未授权",
  "data": null,
  "timestamp": "2025-08-11T11:30:00"
}