# 用户域名注册查询接口文档

## 接口概述
用于查询指定的子域名和主域名组合是否已被注册。

## 接口详情

### 查询域名是否已注册

**接口地址：** `POST /api/user/subdomain/check-registration`

**请求方式：** POST

**请求参数：**
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| subdomain | String | 是 | 子域名前缀，如：www |
| domain | String | 是 | 主域名，如：cblog.eu |

**请求示例：**
```bash
curl -X POST "http://localhost:8080/api/user/subdomain/check-registration" \
  -d "subdomain=www" \
  -d "domain=cblog.eu"
```

**响应格式：**
```json
{
  "code": 200,
  "message": "操作成功",
  "data": "域名 www.cblog.eu 已注册",
  "timestamp": "2025-08-24T03:00:00"
}
```

**响应说明：**
- `code`: 响应状态码，200表示成功
- `message`: 响应消息
- `data`: 查询结果消息
  - 如果域名已注册：`"域名 xxx.xxx 已注册"`
  - 如果域名未注册：`"域名 xxx.xxx 未注册"`
- `timestamp`: 响应时间戳

## 业务逻辑

### 查询流程
1. 接收前端传入的 `subdomain` 和 `domain` 参数
2. 在 `user_subdomain` 表中查询匹配的记录
3. 查询条件：`subdomain = ? AND domain = ? AND status != 'DELETED'`
4. 根据查询结果返回相应的消息

### 状态判断
- **已注册**：在数据库中找到匹配记录且状态不为 `DELETED`
- **未注册**：在数据库中未找到匹配记录或记录状态为 `DELETED`

## 错误处理

### 参数错误
```json
{
  "code": 400,
  "message": "参数不能为空",
  "data": null,
  "timestamp": "2025-08-24T03:00:00"
}
```

### 系统错误
```json
{
  "code": 500,
  "message": "查询域名注册状态失败：数据库连接异常",
  "data": null,
  "timestamp": "2025-08-24T03:00:00"
}
```

## 使用场景

1. **域名注册前检查**：用户在注册新域名前，先检查是否已被占用
2. **域名可用性验证**：系统自动验证用户输入的域名是否可用
3. **批量域名检查**：配合其他接口实现批量域名可用性检查

## 注意事项

1. 查询时会排除状态为 `DELETED` 的记录
2. 子域名和主域名参数都不能为空
3. 查询结果区分大小写
4. 接口返回的是完整域名的注册状态信息

