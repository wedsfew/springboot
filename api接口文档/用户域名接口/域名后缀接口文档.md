# 域名后缀接口文档

## 接口基本信息

- **接口标识**：`DOMAIN_SUFFIXES`
- **请求路径**：`GET /api/domains/suffixes`
- **接口描述**：从数据库获取所有可用的域名后缀（域名名称）
- **认证要求**：无需认证（公开接口）
- **适用业务单元**：域名管理模块

## 请求参数

无需请求参数

## 响应示例

### 成功响应（状态码 200）

```json
{
  "code": 200,
  "message": "获取域名后缀成功",
  "data": [
    "cblog.eu",
    "test23.cblog.eu",
    "twodoller.store",
    "vvvv.host"
  ],
  "timestamp": "2025-08-22T02:12:45.372735088"
}
```

### 空数据响应（状态码 200）

```json
{
  "code": 200,
  "message": "获取域名后缀成功",
  "data": [],
  "timestamp": "2025-08-22T02:12:45.372735088"
}
```

### 失败响应

#### 服务器错误（500）

```json
{
  "code": 500,
  "message": "系统繁忙，请稍后重试",
  "data": null,
  "timestamp": "2025-08-22T02:12:45.372735088"
}
```

## 业务逻辑说明

1. **数据来源**：从domain表中查询status='ENABLE'的域名记录
2. **去重处理**：使用DISTINCT确保返回的域名后缀不重复
3. **排序规则**：按域名名称字母顺序升序排列
4. **过滤条件**：仅返回状态为'ENABLE'的可用域名

## 数据库查询

```sql
SELECT DISTINCT name FROM domain WHERE status = 'ENABLE' ORDER BY name ASC
```

## 调试说明

### 测试用例 1（成功场景）
- **请求**：`GET /api/domains/suffixes`
- **预期响应**：code=200，data包含域名后缀数组
- **验证点**：返回的域名后缀应该是去重且排序的

### 测试用例 2（空数据场景）
- **前置条件**：数据库中没有status='ENABLE'的域名记录
- **请求**：`GET /api/domains/suffixes`
- **预期响应**：code=200，data为空数组[]

## 使用场景

1. **前端下拉选择**：为用户提供可选的域名后缀列表
2. **域名验证**：验证用户输入的域名是否在可用范围内
3. **域名统计**：统计系统中可用的域名数量和类型
4. **API集成**：为其他系统提供域名后缀数据

## 注意事项

1. 该接口返回的是完整的域名名称，不是传统意义上的域名后缀（如.com、.org）
2. 数据实时性取决于domain表的同步频率
3. 接口性能良好，适合频繁调用
4. 无需认证，可直接访问

## 实现代码

```java
@RestController
@RequestMapping("/api/domains")
@CrossOrigin(origins = "*")
public class DomainController {
    
    @Autowired
    private DomainMapper domainMapper;
    
    /**
     * 获取可用的域名后缀列表
     * 
     * @return 统一响应格式，包含域名后缀列表
     */
    @GetMapping("/suffixes")
    public ApiResponse<List<String>> getDomainSuffixes() {
        try {
            List<String> suffixes = domainMapper.findAvailableDomainSuffixes();
            return ApiResponse.success("获取域名后缀成功", suffixes);
        } catch (Exception e) {
            return ApiResponse.error(500, "系统繁忙，请稍后重试");
        }
    }
}
```

## 相关接口

- [DNSPod查询可用三级域名接口](/api接口文档/DNSPod查询可用三级域名接口.md)
- [DNSPod获取域名列表接口](/api接口文档/DNSPod获取域名列表接口.md)

## 版本历史

| 版本号 | 发布日期 | 变更说明 |
|--------|----------|----------|
| v1.0.0 | 2025-08-22 | 初始版本 |