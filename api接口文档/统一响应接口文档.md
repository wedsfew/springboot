# 统一响应接口文档

## 一、API 响应格式规范

### 1.1 统一响应结构
所有API接口均使用统一的响应格式，结构如下：

```json
{
  "code": 200,           // 业务状态码
  "message": "操作成功",   // 响应描述信息
  "data": { ... },       // 响应数据（成功时为业务数据，失败时可为null或错误详情）
  "timestamp": "2025-08-11T00:30:00+08:00"  // 服务器响应时间戳（ISO 8601格式）
}
```

### 1.2 状态码定义

| 状态码 | 含义       | 适用场景                     | 前端处理建议                                |
| ------ | ---------- | ---------------------------- | ------------------------------------------- |
| 200    | 成功       | 请求处理完成且结果正常       | 解析 data 展示业务数据                      |
| 201    | 创建成功   | 资源（如用户、订单）创建完成 | 可跳转至详情页或提示创建结果                |
| 400    | 请求错误   | 参数格式错误、缺失必填项等   | 展示具体参数错误信息（如`data.errors`）     |
| 401    | 未授权     | 未登录、token 过期或无效     | 跳转至登录页                                |
| 403    | 禁止访问   | 登录状态下无操作权限         | 提示 "无权限"，可跳转至首页                 |
| 404    | 资源不存在 | 请求的 URL 或资源 ID 不存在  | 提示 "资源不存在"                           |
| 409    | 资源冲突   | 资源已存在（如用户名重复）   | 提示冲突原因（如 "用户名已被注册"）         |
| 423    | 账户锁定   | 账户因安全原因被临时锁定     | 提示锁定原因及解锁方式                      |
| 500    | 服务器错误 | 后端逻辑异常、数据库错误等   | 提示 "系统繁忙，请稍后重试"，不展示技术细节 |

## 二、用户管理接口

### 2.1 获取所有用户

#### 基本信息

- **接口路径**：`GET /api/users`
- **接口描述**：获取系统中所有用户的列表
- **认证要求**：需要认证（后续实现）

#### 响应示例

```json
{
  "code": 200,
  "message": "操作成功",
  "data": [
    {
      "id": 1,
      "username": "admin",
      "email": "admin@example.com"
    },
    {
      "id": 2,
      "username": "user1",
      "email": "user1@example.com"
    }
  ],
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

### 2.2 获取单个用户

#### 基本信息

- **接口路径**：`GET /api/users/{id}`
- **接口描述**：根据用户ID获取用户详细信息
- **认证要求**：需要认证（后续实现）

#### 路径参数

| 参数名 | 类型   | 描述     | 是否必须 |
| ------ | ------ | -------- | -------- |
| id     | Long   | 用户ID   | 是       |

#### 响应示例

##### 成功响应

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "username": "admin",
    "email": "admin@example.com"
  },
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

##### 用户不存在响应

```json
{
  "code": 404,
  "message": "用户不存在",
  "data": null,
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

### 2.3 创建用户

#### 基本信息

- **接口路径**：`POST /api/users`
- **接口描述**：创建新用户
- **认证要求**：需要认证（后续实现）

#### 请求参数

```json
{
  "username": "newuser",
  "password": "Password123",
  "email": "newuser@example.com"
}
```

#### 响应示例

##### 成功响应

```json
{
  "code": 201,
  "message": "创建成功",
  "data": {
    "id": 3,
    "username": "newuser",
    "email": "newuser@example.com"
  },
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

### 2.4 更新用户

#### 基本信息

- **接口路径**：`PUT /api/users/{id}`
- **接口描述**：更新指定ID的用户信息
- **认证要求**：需要认证（后续实现）

#### 路径参数

| 参数名 | 类型   | 描述     | 是否必须 |
| ------ | ------ | -------- | -------- |
| id     | Long   | 用户ID   | 是       |

#### 请求参数

```json
{
  "username": "updateduser",
  "password": "NewPassword123",
  "email": "updated@example.com"
}
```

#### 响应示例

##### 成功响应

```json
{
  "code": 200,
  "message": "用户更新成功",
  "data": {
    "id": 1,
    "username": "updateduser",
    "email": "updated@example.com"
  },
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

##### 用户不存在响应

```json
{
  "code": 404,
  "message": "用户不存在",
  "data": null,
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

### 2.5 删除用户

#### 基本信息

- **接口路径**：`DELETE /api/users/{id}`
- **接口描述**：删除指定ID的用户
- **认证要求**：需要认证（后续实现）

#### 路径参数

| 参数名 | 类型   | 描述     | 是否必须 |
| ------ | ------ | -------- | -------- |
| id     | Long   | 用户ID   | 是       |

#### 响应示例

##### 成功响应

```json
{
  "code": 200,
  "message": "用户删除成功",
  "data": null,
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

##### 用户不存在响应

```json
{
  "code": 404,
  "message": "用户不存在",
  "data": null,
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

## 三、测试接口

### 3.1 健康检查接口

#### 基本信息

- **接口路径**：`GET /health`
- **接口描述**：检查应用是否正常运行
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "status": "UP",
    "message": "应用正常运行中"
  },
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

### 3.2 API测试接口

#### 3.2.1 成功响应测试

- **接口路径**：`GET /api/test/success`
- **接口描述**：测试成功响应
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 200,
  "message": "操作成功",
  "data": "这是一个成功的响应",
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

#### 3.2.2 带数据的成功响应测试

- **接口路径**：`GET /api/test/data`
- **接口描述**：测试带数据的成功响应
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 200,
  "message": "获取数据成功",
  "data": {
    "name": "测试用户",
    "age": 25,
    "email": "test@example.com"
  },
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

#### 3.2.3 创建资源响应测试

- **接口路径**：`POST /api/test/create`
- **接口描述**：测试创建资源响应
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 201,
  "message": "创建成功",
  "data": {
    "id": 100,
    "username": "newUser",
    "email": "new@example.com"
  },
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

#### 3.2.4 列表数据响应测试

- **接口路径**：`GET /api/test/list`
- **接口描述**：测试列表数据响应
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 200,
  "message": "操作成功",
  "data": ["项目1", "项目2", "项目3"],
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

#### 3.2.5 业务异常测试

- **接口路径**：`GET /api/test/business-error`
- **接口描述**：测试业务异常响应
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 400,
  "message": "业务处理失败：参数不符合业务规则",
  "data": null,
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

#### 3.2.6 资源未找到异常测试

- **接口路径**：`GET /api/test/not-found/{id}`
- **接口描述**：测试资源未找到异常响应
- **认证要求**：无需认证

#### 路径参数

| 参数名 | 类型   | 描述     | 是否必须 |
| ------ | ------ | -------- | -------- |
| id     | Long   | 资源ID   | 是       |

#### 响应示例

```json
{
  "code": 404,
  "message": "ID为123的资源不存在",
  "data": null,
  "timestamp": "2025-08-11T00:30:00+08:00"
}
```

#### 3.2.7 服务器错误测试

- **接口路径**：`GET /api/test/server-error`
- **接口描述**：测试服务器错误响应
- **认证要求**：无需认证

#### 响应示例

```json
{
  "code": 500,
  "message": "服务器内部错误",
  "data": "服务器内部错误测试",
  "timestamp": "2025-08-11T00:30:00+08:00"
}